<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>SMTAggregateBeacon | @did-btc1/method</title><meta name="description" content="Documentation for @did-btc1/method"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">@did-btc1/method</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="" aria-current="page">SMTAggregateBeacon</a></li></ul><h1>Class SMTAggregateBeacon</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>TODO: Finish implementation</p>
<p>Implements <a href="https://dcdpr.github.io/did-btc1/#smtaggregate-beacon">5.3 SMTAggregate Beacon</a>.</p>
<p>A SMTAggregate Beacon is a Beacon whose Beacon Signals are Bitcoin transactions containing the root of a Sparse
Merkle Tree (SMT). The SMT root attests to a set of DID Update Payloads, however, the updates themselves MUST be
provided along with a proof of inclusion against the SMT root through a Sidecar mechanism during resolution. Using
the SMT root a resolver can then verify the inclusion proof for the given DID Update Payload. If a DID document
includes a SMTAggregator Beacon in their set of Beacon services, then they MUST provide proofs for each signal that
the Beacon broadcasts. If they did not submit an update to their DID in a signal, then they MUST provide a proof of
non-inclusion for that signal.</p>
<p>SMTAggregateBeacon</p>
</div><div class="tsd-comment tsd-typography"></div></section><section class="tsd-panel tsd-hierarchy" data-refl="239"><h4>Hierarchy (<a href="../hierarchy.html#SMTAggregateBeacon">View Summary</a>)</h4><ul class="tsd-hierarchy"><li class="tsd-hierarchy-item"><a href="Beacon.html" class="tsd-signature-type tsd-kind-class">Beacon</a><ul class="tsd-hierarchy"><li class="tsd-hierarchy-item"><span class="tsd-hierarchy-target">SMTAggregateBeacon</span></li></ul></li></ul></section><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jintekc/did-btc1-js/blob/4e83e31069f73b9a38a52892558302bd20237e8b/packages/method/src/btc1/beacons/smt-aggregate.ts#L26">packages/method/src/btc1/beacons/smt-aggregate.ts:26</a></li></ul></aside><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-accordion" open><summary class="tsd-accordion-summary tsd-index-summary"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronSmall"></use></svg><h5 class="tsd-index-heading uppercase">Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Constructors</h3><div class="tsd-index-list"><a href="#constructor" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Constructor"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Properties</h3><div class="tsd-index-list"><a href="#id" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>id</span></a>
<a href="#serviceendpoint" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>service<wbr/>Endpoint</span></a>
<a href="#sidecar" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>sidecar?</span></a>
<a href="#type" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>type</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Accessors</h3><div class="tsd-index-list"><a href="#service" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Accessor"><use href="../assets/icons.svg#icon-262144"></use></svg><span>service</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Methods</h3><div class="tsd-index-list"><a href="#broadcastsignal" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>broadcast<wbr/>Signal</span></a>
<a href="#generatesignal" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>generate<wbr/>Signal</span></a>
<a href="#processsignal" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>process<wbr/>Signal</span></a>
<a href="#establish" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>establish</span></a>
</div></section></div></details></section></section><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Constructors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Constructors</h2></summary><section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="constructor"><span>constructor</span><a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="constructorsmtaggregatebeacon"><span class="tsd-signature-keyword">new</span> <span class="tsd-kind-constructor-signature">SMTAggregateBeacon</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">service</span><span class="tsd-signature-symbol">:</span> <a href="../interfaces/BeaconService.html" class="tsd-signature-type tsd-kind-interface">BeaconService</a><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">sidecar</span><span class="tsd-signature-symbol">?:</span> <a href="../types/SidecarData.html" class="tsd-signature-type tsd-kind-type-alias">SidecarData</a><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <a href="" class="tsd-signature-type tsd-kind-class">SMTAggregateBeacon</a><a href="#constructorsmtaggregatebeacon" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Creates an instance of SMTAggregateBeacon.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">service</span>: <a href="../interfaces/BeaconService.html" class="tsd-signature-type tsd-kind-interface">BeaconService</a></span><div class="tsd-comment tsd-typography"><p>The Beacon service.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">sidecar</span>: <a href="../types/SidecarData.html" class="tsd-signature-type tsd-kind-type-alias">SidecarData</a></span><div class="tsd-comment tsd-typography"><p>Optional sidecar data.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="" class="tsd-signature-type tsd-kind-class">SMTAggregateBeacon</a></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Overrides <a href="Beacon.html">Beacon</a>.<a href="Beacon.html#constructor">constructor</a></p><ul><li>Defined in <a href="https://github.com/jintekc/did-btc1-js/blob/4e83e31069f73b9a38a52892558302bd20237e8b/packages/method/src/btc1/beacons/smt-aggregate.ts#L32">packages/method/src/btc1/beacons/smt-aggregate.ts:32</a></li></ul></aside></div></li></ul></section></section></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Properties"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Properties</h2></summary><section><section class="tsd-panel tsd-member tsd-is-inherited"><h3 class="tsd-anchor-link" id="id"><span>id</span><a href="#id" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">id</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span></div><div class="tsd-comment tsd-typography"><p>A unique identifier for the Beacon</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="Beacon.html">Beacon</a>.<a href="Beacon.html#id">id</a></p><ul><li>Defined in <a href="https://github.com/jintekc/did-btc1-js/blob/4e83e31069f73b9a38a52892558302bd20237e8b/packages/method/src/interfaces/beacon.ts#L36">packages/method/src/interfaces/beacon.ts:36</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-inherited"><h3 class="tsd-anchor-link" id="serviceendpoint"><span>service<wbr/>Endpoint</span><a href="#serviceendpoint" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">serviceEndpoint</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">DidServiceEndpoint</span></div><div class="tsd-comment tsd-typography"><p>The service endpoint of the Beacon</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="Beacon.html">Beacon</a>.<a href="Beacon.html#serviceendpoint">serviceEndpoint</a></p><ul><li>Defined in <a href="https://github.com/jintekc/did-btc1-js/blob/4e83e31069f73b9a38a52892558302bd20237e8b/packages/method/src/interfaces/beacon.ts#L38">packages/method/src/interfaces/beacon.ts:38</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-inherited"><h3 class="tsd-anchor-link" id="sidecar"><code class="tsd-tag">Optional</code><span>sidecar</span><a href="#sidecar" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">sidecar</span><span class="tsd-signature-symbol">?:</span> <a href="../interfaces/SingletonSidecar.html" class="tsd-signature-type tsd-kind-interface">SingletonSidecar</a> <span class="tsd-signature-symbol">|</span> <a href="../interfaces/CIDAggregateSidecar.html" class="tsd-signature-type tsd-kind-interface">CIDAggregateSidecar</a> <span class="tsd-signature-symbol">|</span> <a href="../interfaces/SMTAggregateSidecar.html" class="tsd-signature-type tsd-kind-interface">SMTAggregateSidecar</a></div><aside class="tsd-sources"><p>Inherited from <a href="Beacon.html">Beacon</a>.<a href="Beacon.html#sidecar">sidecar</a></p><ul><li>Defined in <a href="https://github.com/jintekc/did-btc1-js/blob/4e83e31069f73b9a38a52892558302bd20237e8b/packages/method/src/interfaces/beacon.ts#L39">packages/method/src/interfaces/beacon.ts:39</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-inherited"><h3 class="tsd-anchor-link" id="type"><span>type</span><a href="#type" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">type</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span></div><div class="tsd-comment tsd-typography"><p>The type of the Beacon</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="Beacon.html">Beacon</a>.<a href="Beacon.html#type">type</a></p><ul><li>Defined in <a href="https://github.com/jintekc/did-btc1-js/blob/4e83e31069f73b9a38a52892558302bd20237e8b/packages/method/src/interfaces/beacon.ts#L37">packages/method/src/interfaces/beacon.ts:37</a></li></ul></aside></section></section></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Accessors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Accessors</h2></summary><section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="service"><span>service</span><a href="#service" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li><div class="tsd-signature" id="serviceservice"><span class="tsd-signature-keyword">get</span> <span class="tsd-kind-get-signature">service</span><span class="tsd-signature-symbol">()</span><span class="tsd-signature-symbol">:</span> <a href="../interfaces/BeaconService.html" class="tsd-signature-type tsd-kind-interface">BeaconService</a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Get the Beacon service.</p>
</div><h4 class="tsd-returns-title">Returns <a href="../interfaces/BeaconService.html" class="tsd-signature-type tsd-kind-interface">BeaconService</a></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Overrides Beacon.service</p><ul><li>Defined in <a href="https://github.com/jintekc/did-btc1-js/blob/4e83e31069f73b9a38a52892558302bd20237e8b/packages/method/src/btc1/beacons/smt-aggregate.ts#L41">packages/method/src/btc1/beacons/smt-aggregate.ts:41</a></li></ul></aside></div></li></ul></section></section></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Methods"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Methods</h2></summary><section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="broadcastsignal"><span>broadcast<wbr/>Signal</span><a href="#broadcastsignal" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="broadcastsignal-1"><span class="tsd-kind-call-signature">broadcastSignal</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">didUpdatePayload</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">DidUpdatePayload</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../types/SignalMetadata.html" class="tsd-signature-type tsd-kind-type-alias">SignalMetadata</a><span class="tsd-signature-symbol">&gt;</span><a href="#broadcastsignal-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Implements <a href="https://dcdpr.github.io/did-btc1/#broadcast-smtaggregate-beacon-signal">5.3.2 Broadcast SMTAggregate Beacon Signal</a>.</p>
<p>To publish a DID Update Payload, the DID controller MUST get a hash of the DID Update Payload included at the leaf
of the Sparse Merkle Tree (SMT) identified by their did:btc1 identifier and receive an inclusion proof for this
data. If a member of the Beacon cohort does not wish to announce an update in a Beacon Signal, they MUST receive
and verify a proof of non-inclusion for their DID. Upon verifying the non-inclusion proof against the SMT root
contained in the Beacon Signal, they SHOULD accept and authorize the signal following the MuSig2 protocol. Once all
members of the cohort have authorized the signal, it can be broadcast as a transaction to the Bitcoin network. DID
controllers are responsible for persisting their DID updates and proofs, these will need to be provided through a
Sidecar mechanism during a resolution process.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">didUpdatePayload</span>: <span class="tsd-signature-type">DidUpdatePayload</span></span><div class="tsd-comment tsd-typography"><p>The DID Update Payload to broadcast.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../types/SignalMetadata.html" class="tsd-signature-type tsd-kind-type-alias">SignalMetadata</a><span class="tsd-signature-symbol">&gt;</span></h4><p>The signal metadata.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws">Throws<a href="#throws" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>if the signal is invalid.</p>
</div></div><aside class="tsd-sources"><p>Overrides <a href="Beacon.html">Beacon</a>.<a href="Beacon.html#broadcastsignal">broadcastSignal</a></p><ul><li>Defined in <a href="https://github.com/jintekc/did-btc1-js/blob/4e83e31069f73b9a38a52892558302bd20237e8b/packages/method/src/btc1/beacons/smt-aggregate.ts#L101">packages/method/src/btc1/beacons/smt-aggregate.ts:101</a></li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="generatesignal"><span>generate<wbr/>Signal</span><a href="#generatesignal" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="generatesignal-1"><span class="tsd-kind-call-signature">generateSignal</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">didUpdatePayload</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <a href="../interfaces/BeaconSignal.html" class="tsd-signature-type tsd-kind-interface">BeaconSignal</a><a href="#generatesignal-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>TODO: Figure out if this is necessary or not.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">didUpdatePayload</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>The DID Update Payload to generate the signal for.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="../interfaces/BeaconSignal.html" class="tsd-signature-type tsd-kind-interface">BeaconSignal</a></h4><p>The generated signal.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-1">Throws<a href="#throws-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>if the signal is invalid.</p>
</div></div><aside class="tsd-sources"><p>Overrides <a href="Beacon.html">Beacon</a>.<a href="Beacon.html#generatesignal">generateSignal</a></p><ul><li>Defined in <a href="https://github.com/jintekc/did-btc1-js/blob/4e83e31069f73b9a38a52892558302bd20237e8b/packages/method/src/btc1/beacons/smt-aggregate.ts#L56">packages/method/src/btc1/beacons/smt-aggregate.ts:56</a></li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="processsignal"><span>process<wbr/>Signal</span><a href="#processsignal" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="processsignal-1"><span class="tsd-kind-call-signature">processSignal</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">signal</span><span class="tsd-signature-symbol">:</span> <a href="../interfaces/RawTransactionV2.html" class="tsd-signature-type tsd-kind-interface">RawTransactionV2</a><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">signalsMetadata</span><span class="tsd-signature-symbol">:</span> <a href="../types/SignalsMetadata.html" class="tsd-signature-type tsd-kind-type-alias">SignalsMetadata</a><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">undefined</span> <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">DidUpdateInvocation</span><span class="tsd-signature-symbol">&gt;</span><a href="#processsignal-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Implements <a href="https://dcdpr.github.io/did-btc1/#process-smtaggregate-beacon-signal">5.3.3 Process SMTAggregate Beacon Signal</a>.</p>
<p>A Beacon Signal from a SMTAggregate Beacon is a Bitcoin transaction with the first transaction output of the format
[OP_RETURN, OP_PUSH32, &lt;32bytes&gt;]. The 32 bytes of data contained within this transaction output represent the root
of a Sparse Merkle Tree (SMT). This SMT aggregates a set of hashes of DID Update payloads. In order to process
these Beacon Signals, the resolver MUST have been passed Sidecar data for this signal containing either the DID
Update payload object and a SMT proof that the hash of this object is in the SMT at the leaf indexed by the
did:btc1identifier being resolved. Or theSidecar data:: MUST contain a proof that the leaf indexed by the
did:btc1identifier is empty, thereby proving that theSMT:: does not contain an update for their identifier.</p>
<p>The Process SMTAggregate Beacon Signal is called by the Process Beacon Signals algorithm as part of the Read
operation. It takes as inputs a did:btc1 identifier, btc1Identifier, a Beacon Signal, tx, and a optional object,
signalSidecarData, containing any sidecar data provided to the resolver for the Beacon Signal identified by the
Bitcoin transaction identifier.</p>
<p>It returns the DID Update payload announced by the Beacon Signal for the did:btc1 identifier being resolved or
throws an error.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">signal</span>: <a href="../interfaces/RawTransactionV2.html" class="tsd-signature-type tsd-kind-interface">RawTransactionV2</a></span><div class="tsd-comment tsd-typography"><p>The raw transaction signal.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">signalsMetadata</span>: <a href="../types/SignalsMetadata.html" class="tsd-signature-type tsd-kind-type-alias">SignalsMetadata</a></span><div class="tsd-comment tsd-typography"><p>The signals metadata.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">undefined</span> <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">DidUpdateInvocation</span><span class="tsd-signature-symbol">&gt;</span></h4><p>The updated DID document.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-2">Throws<a href="#throws-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>if the signal is invalid.</p>
</div></div><aside class="tsd-sources"><p>Overrides <a href="Beacon.html">Beacon</a>.<a href="Beacon.html#processsignal">processSignal</a></p><ul><li>Defined in <a href="https://github.com/jintekc/did-btc1-js/blob/4e83e31069f73b9a38a52892558302bd20237e8b/packages/method/src/btc1/beacons/smt-aggregate.ts#L130">packages/method/src/btc1/beacons/smt-aggregate.ts:130</a></li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="establish"><code class="tsd-tag">Static</code><span>establish</span><a href="#establish" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="establish-1"><span class="tsd-kind-call-signature">establish</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">id</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">type</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">serviceEndpoint</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">DidServiceEndpoint</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <a href="" class="tsd-signature-type tsd-kind-class">SMTAggregateBeacon</a><a href="#establish-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Implements <a href="https://dcdpr.github.io/did-btc1/#establish-beacon">5.3.1 Establish Beacon</a>.</p>
<p>The Establish Beacon algorithm is essentially the same as for the CIDAggregate Beacon in Establish CIDAggregate
Beacon. A cohort of DID controllers need to coordinate to produce a Bitcoin address that will act as the Beacon.
It is RECOMMENDED this is an n-of-n P2TR address, with n being the set of DID controllers in the cohort. Once the
address has been created, and all parties in the cohort acknowledge their intention to participate in that Beacon,
each DID controller SHOULD add the Beacon as a service to their DID document.</p>
<p>Additionally, the SMTAggregate Beacon cohort participants MUST register the did:btc1 identifiers they intend use
this Beacon with. This is so the Beacon coordinator can generate the necessary proofs of both inclusion and
non-inclusion for each DID.</p>
<p>Static, convenience method for establishing a Beacon object.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">id</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>The Beacon ID.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">type</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>The Beacon type.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">serviceEndpoint</span>: <span class="tsd-signature-type">DidServiceEndpoint</span></span><div class="tsd-comment tsd-typography"><p>The service endpoint.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="" class="tsd-signature-type tsd-kind-class">SMTAggregateBeacon</a></h4><p>The Beacon.</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/jintekc/did-btc1-js/blob/4e83e31069f73b9a38a52892558302bd20237e8b/packages/method/src/btc1/beacons/smt-aggregate.ts#L80">packages/method/src/btc1/beacons/smt-aggregate.ts:80</a></li></ul></aside></div></li></ul></section></section></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Constructors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Constructors</summary><div><a href="#constructor"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Constructor"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Properties"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Properties</summary><div><a href="#id" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>id</span></a><a href="#serviceendpoint" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>service<wbr/>Endpoint</span></a><a href="#sidecar" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>sidecar</span></a><a href="#type" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>type</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Accessors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Accessors</summary><div><a href="#service"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Accessor"><use href="../assets/icons.svg#icon-262144"></use></svg><span>service</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Methods"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Methods</summary><div><a href="#broadcastsignal"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>broadcast<wbr/>Signal</span></a><a href="#generatesignal"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>generate<wbr/>Signal</span></a><a href="#processsignal"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>process<wbr/>Signal</span></a><a href="#establish"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>establish</span></a></div></details></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">@did-btc1/method</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
